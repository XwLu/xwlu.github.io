<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://xwlu.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://xwlu.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/light.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/syntax.css' />
    <title>Type - My New Hugo Site</title>
    
    <link rel="icon" type="image/x-icon" href='https://xwlu.github.io/images/favicon.ico'>
    
    <meta name="theme-color" content="#1e2327">

    
    

    
    <meta name="description"
  content="Type for C&#43;&#43;" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://xwlu.github.io/post/languages/c&#43;&#43;/type/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Type - My New Hugo Site" />
<meta name="twitter:description"
  content="Type for C&#43;&#43;" />
<meta name="twitter:site" content="https://xwlu.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://xwlu.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="Type - My New Hugo Site">
<meta property="og:description"
  content="Type for C&#43;&#43;" />
<meta property="og:url" content="https://xwlu.github.io/post/languages/c&#43;&#43;/type/" />
<meta property="og:site_name" content="Type" />
<meta property="og:image"
  content="https://xwlu.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-04-02 10:32:39 &#43;0800 CST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://xwlu.github.io/">
        <img class="octicon" height="32" width="32" src="">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://xwlu.github.io/">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://xwlu.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://xwlu.github.io/">
                  <img class=" avatar-user"
                    src="https://xwlu.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://xwlu.github.io/"></a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://xwlu.github.io/post/languages/c&#43;&#43;/type/">Type</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Wed, 02 Apr 2025 10:32:39 &#43;0800"
                    class="no-wrap">
                    Wed, 02 Apr 2025 10:32:39 &#43;0800</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1792 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="初始化赋值">初始化&amp;赋值</h1>
<ul>
<li>功能是将某个值与一个对象关联起来
<ul>
<li>值：字面值、对象（变量、常量）所表示的值</li>
<li>标识符：变量、常量、引用</li>
<li>初始化基本操作
<ul>
<li>在内存中开辟空间，保存相应的数值</li>
<li>在编译器中构造符号表，将标识符与相关内存空间关联起来</li>
</ul>
</li>
<li>值和对象都有类型</li>
<li>初始化、赋值都可能涉及到内存转换</li>
</ul>
</li>
</ul>
<h1 id="类型描述">类型描述</h1>
<ul>
<li>类型是一个编译期概念，可执行文件中不存在类型的概念</li>
<li>C++是强类型语言</li>
<li>类型描述了
<ul>
<li>存储尺寸(sizeof)</li>
<li>取值空间(numric_limit)</li>
<li>对齐信息(align of)</li>
<li>可执行的操作</li>
</ul>
</li>
<li>使用int8_t, int16_t, int32_t等去强制确定类型的大小</li>
<li>为字面值引入前后缀改变其类型
<ul>
<li>1.3(double), 1.3f(float)</li>
<li>2(int), 2ULL(unsigned long long)</li>
</ul>
</li>
<li>可以自定义字面值后缀
<pre tabindex="0"><code>int operator &#34;&#34; _ddd(long double x) {  // 注意：这里能支持自定义后缀的数据类型就只有明确的几种，可以去cppreference里搜user_literal查看
  return (int)x * 2;
}

int main() {
  int x = 3.14_ddd;  // 6
}
</code></pre></li>
</ul>
<h1 id="变量及其类型">变量及其类型</h1>
<ul>
<li>变量的初始化
<pre tabindex="0"><code>int x;  // 缺省初始化
int x(10);  // 直接初始化
int x{10};  // 直接初始化
int x = 10;  // 拷贝初始化
</code></pre></li>
<li>为变量赋值时可能发生隐式类型转换
<pre tabindex="0"><code>unsigned int x = -1;  // x为最大的整数
</code></pre></li>
<li>隐式类型转换不只发生在赋值时
<ul>
<li>if判断
<pre tabindex="0"><code>if (3) {
  // true
}
if (-1) {
  // true
}
if (0) {
  // false
}
</code></pre></li>
<li>数值比较
<pre tabindex="0"><code>int x = -1;
unsigned int y = 3;
std::cout &lt;&lt; (x &lt; y) &lt;&lt; &#34;\n&#34;;  // 当无符号数与带符号数进行比较时，C++都转化为无符号数进行比较，所以这里返回false
</code></pre><ul>
<li>C++20中引入了cmp_xxx操作去处理上面的异常</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="指针">指针</h1>
<ul>
<li>void*指针
<ul>
<li>没有记录对象的尺寸信息，可以保存任意地址（某些情况下，我们只需要保存一个指针，而不关注这个指针指向对象的类型）
<pre tabindex="0"><code>void fun(void* param) {
  std::cout &lt;&lt; (param + 1) &lt;&lt; &#34;\n&#34;;  // 报错，不知道param的尺寸，不知道+1是向后移动多少位
}
</code></pre></li>
<li>可以转换为任意类型的指针，也可以由任意类型的指针转换得到</li>
<li>支持判等操作</li>
</ul>
</li>
</ul>
<h1 id="引用">引用</h1>
<ul>
<li>是对象的别名，不能绑定字面值</li>
<li>构造时绑定某个对象，生命周期之内不能绑定其他对象</li>
<li>不存在空引用，但存在非法引用——总的来说比指针安全
<pre tabindex="0"><code>int&amp; fun() {
  int x;
  return x;
}

int main() {
  int&amp; res = fun();  // 编译能通过，但非法
}
</code></pre></li>
<li>属于编译期概念，底层还是通过指针去实现</li>
<li>指针的引用
<ul>
<li>指针是对象，可以引用
<pre tabindex="0"><code>int* p = &amp;val;
int* &amp; ref = p;  // 类型信息从右向左引用
</code></pre></li>
</ul>
</li>
<li>指针对比引用
<ul>
<li>指针可以为空，引用肯定指向某个内存对象</li>
<li>指针的地址可能非法</li>
<li>引用的本质就是不可变的、合法的、指向某块内存的指针</li>
</ul>
</li>
</ul>
<h1 id="常量引用">常量引用</h1>
<pre tabindex="0"><code>constexpr T xx;  // xx的数据类型还是const T，只不过constexpr表示它的初始值在编译期就确定了
constexpr const int* ptr = nullptr;  // constexpr修饰ptr，所以ptr的类型是const * const
</code></pre><h1 id="类型别名与类型的自动推导">类型别名与类型的自动推导</h1>
<ul>
<li>两种引入类型别名的方法
<pre tabindex="0"><code>typedef int MyInt;
using MyInt = int;  // (since C++11)
</code></pre></li>
<li>使用using引入类型别名更好
<pre tabindex="0"><code>typedef char MyCharArr[4];  // 写法比较混乱
using MyCharArr = char[4];
</code></pre></li>
<li>类型别名和指针、引用的关系
<ul>
<li>应该将指针的类型别名视为一个整体，在此基础上引入的长量表示指针为常量的类型
<pre tabindex="0"><code>using IntPtr = int*;
int main() {
  int x = 3;
  const IntPtr ptr = &amp;x;
  const int* ptr = &amp;x;  // 上下两行不等价，上面的const修饰的是ptr，下面的const修饰的是指针指向的内容
}
</code></pre></li>
<li>不能通过类型别名构造引用的引用
<pre tabindex="0"><code>#include &lt;type_traits&gt;
using RefInt = int&amp;;
using RefRefInt = RefInt&amp;;
int main() {
  std::is_same_v(RefInt, RefRefInt);  // true
}
</code></pre></li>
</ul>
</li>
<li>类型的自动推导
<ul>
<li>常见形式
<ul>
<li>auto: 最常用的形式，但会产生类型退化
<pre tabindex="0"><code>int x = 3;
int&amp; ref = x;
auto ref2 = ref;  // auto 自动推导出来的类型不是int&amp;，而是int
</code></pre></li>
<li>const auto/constexpr auto: 推导出的是常量、常量表达式类型</li>
<li>auto&amp;: 推导出引用类型，避免类型退化
<pre tabindex="0"><code>const int x = 3;
auto&amp; y = x;  // y的类型是const int&amp;

int x1[3] = {1, 2, 3};
auto x2 = x1;  // x2的类型是int*
auto&amp; x3 = x1;  // x3的类型是int(&amp;)[3]
</code></pre></li>
<li>decltype(exp): 返回exp表达式的类型（如果表达式是左值，会加引用）
<pre tabindex="0"><code>int x = 3;
int&amp; y1 = x;
auto y2 = y1;  // int
decltype(y1) y3 = y1;  // int&amp;

int* ptr = &amp;x;
decltype(*ptr);  // int&amp;, 因为*ptr是个左值，所以会加上引用
decltype(3.5 + 15l);  // double，表达式是右值，所以不加引用
</code></pre></li>
<li>decltype(val): 返回val的类型
<pre tabindex="0"><code>int x = 3;
decltype(x);  // 按照上面的说法，x是左值，所以这里是int&amp;，但其实不是
// 原因是，有个约定，如果decltype后面跟的是一个变量名，不加引用
int* ptr = &amp;x;
decltype(ptr);  // int*, ptr是个左值，但更是一个变量名，所以不加引用

const int y1 = 3;
const int&amp; y2 = y1;
decltype(y1);  // const int
decltype(y2);  // const int&amp;
decltype((y1));  // const int&amp;, (y1)是一个表达式，且是一个左值，所以加上引用
decltype((y2));  // const int&amp;, (y2)是一个表达式，且是一个左值，所以加上引用，但本身已经有引用，不会变成引用的引用
</code></pre></li>
<li>decltype(auto): since C++14
<pre tabindex="0"><code>int x = 3;
int&amp; y1 = x;
auto y2 = y1;  // int，简洁
decltype(y1) y3 = y1;  // int&amp;，不会引起退化
decltype(auto) y3 = y1;  // int&amp;，简洁且不会引起退化
</code></pre></li>
<li>concept auto: since C++20
<pre tabindex="0"><code>std::integral auto y = 3.5;  // 编译失败，auto自动推导出来的类型(double、float)都不属于integral的范畴
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ul>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://xwlu.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://xwlu.github.io/css/toc.css' />

  
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://xwlu.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="https://xwlu.github.io/js/github-style.js"></script>







</html>