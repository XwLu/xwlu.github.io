<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://xwlu.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://xwlu.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/light.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://xwlu.github.io/css/syntax.css' />
    <title>Array Vector String - 朝花夕拾</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    <link rel="stylesheet" href="https://xwlu.github.io/css/custom.css">
    <script type="text/javascript" src="https://xwlu.github.io/js/custom.js"></script>

    
    <meta name="description"
  content="array, vector, string for C&#43;&#43;" />
<meta name="keywords"
  content='blog, robotics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://xwlu.github.io/post/languages/c&#43;&#43;/array-vector-string/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Array Vector String - 朝花夕拾" />
<meta name="twitter:description"
  content="array, vector, string for C&#43;&#43;" />
<meta name="twitter:site" content="https://xwlu.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://xwlu.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="Array Vector String - 朝花夕拾">
<meta property="og:description"
  content="array, vector, string for C&#43;&#43;" />
<meta property="og:url" content="https://xwlu.github.io/post/languages/c&#43;&#43;/array-vector-string/" />
<meta property="og:site_name" content="Array Vector String" />
<meta property="og:image"
  content="https://xwlu.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-04-02 10:32:39 &#43;0800 CST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://xwlu.github.io/">
        <img class="octicon" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://xwlu.github.io/">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://xwlu.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://xwlu.github.io/">
                  <img class=" avatar-user"
                    src="/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://xwlu.github.io/">looyifan</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://xwlu.github.io/post/languages/c&#43;&#43;/array-vector-string/">Array Vector String</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Wed, 02 Apr 2025 10:32:39 &#43;0800"
                    class="no-wrap">
                    Wed, 02 Apr 2025 10:32:39 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Wed, 02 Apr 2025 16:29:40 &#43;0800"
                    class="no-wrap">
                    Wed, 02 Apr 2025 16:29:40 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1683 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="数组">数组</h1>
<ul>
<li>数组初始化方式
<ul>
<li>缺省初始化</li>
<li>聚合初始化
<pre tabindex="0"><code>int a[3] = {1, 2};
int b[3] = {1, 2, 3};
int c[] = {1, 2, 3};  // c的类型是int[3]
</code></pre></li>
</ul>
</li>
<li>注意
<ul>
<li>不能使用auto来声明数组类型
<pre tabindex="0"><code>#include &lt;typeinfo&gt;
#include &lt;iostream&gt;

int main() {
  auto b = {1, 2, 3};
  std::cout &lt;&lt; typeid(b).name() &lt;&lt; std::endl;  // ./exe | c++filt -t 得到std::initializer_list&lt;int&gt;
}
</code></pre></li>
<li>数组不能复制
<pre tabindex="0"><code>int b[] = {1, 2};
auto a = b;  // a的类型是int*，发生了类型退化
auto&amp; c = b;  // auto&amp;可以防止类型退化，c的类型是int(&amp;)[3]
int d[3];
d = b;  // 报错
</code></pre></li>
<li>元素个数必须是一个常量表达式（编译期可计算的值），且值必须大于0
<pre tabindex="0"><code>int a[3];  // a是一个数组，类型是int[3]
int x;
std::cin &gt;&gt; x;
int b[x];  // C语言从C99开始支持variable length array，但C++标准不支持
// 虽然C++标准不支持，但clang++或g++的部分版本的编译器实现中还是支持该方法，但不建议使用，在代码跨平台移植的时候会出问题
</code></pre></li>
<li>int和int[1]是两个不同的类型</li>
<li>字符串数组的特殊性
<pre tabindex="0"><code>int main() {
  char str[] = &#34;Hello&#34;;  // 类型是char[6]，隐式地在字符串最后加一个&#39;\0&#39;
  char str[] = {&#39;H&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;};  // 类型是char[5]
}
</code></pre></li>
</ul>
</li>
<li>数组的复杂声明
<ul>
<li>指针数组与数组指针
<pre tabindex="0"><code>int* a[3];  // a是个数组，存了3个int*指针，类型是int*[3]
int (*a)[3];  // a是个指针，指向一个int[3]类型的数组，类型是int(*)[3]
</code></pre></li>
<li>声明数组的引用
<pre tabindex="0"><code>int a[3];
int (&amp;b)[3] = a;  // b是a的引用
// auto&amp; b = a;  // 同上
int x1;
int&amp; c[1] = {x1};  // C++不支持引用的数组
</code></pre></li>
</ul>
</li>
<li>数组到指针的隐式转换
<ul>
<li>会丢失一些信息，比如数组的长度</li>
<li>可以通过声明引用来避免隐式类型转换</li>
<li>注意：不要用extern指针来声明数组
<ul>
<li>unknown bounded array声明
<pre tabindex="0"><code>// source.cc
int array[5] = {1, 2};
int array1[5] = {1, 2};

// main.cc
extern int array[];  // unknown bounded array
extern int* array1;

int main() {
  array[0];  // 编译通过，运行正常
  array1[0];  // 编译通过，运行不正常，强行用指针解释数组的内容，会出屎
}
</code></pre></li>
</ul>
</li>
<li>获得指向数组开头和结尾的指针
<pre tabindex="0"><code>// 这里的array不可以是指针
// extern int array[];  // 不可以是unknown bounded array
extern int array[4];  // 这个声明可以
std::begin(array);  // int*
std::cbegin(array);  // const int*
std::end(array);  // int*
std::cend(array);  // const int*
</code></pre></li>
<li>指针算数
<ul>
<li>增加、减少、比较</li>
<li>求距离</li>
<li>解引用</li>
<li>指针索引</li>
</ul>
<pre tabindex="0"><code>int a[3] = {1, 2, 3};
auto ptr = a;
*ptr;
*a;
ptr[1];
</code></pre></li>
</ul>
</li>
<li>其他操作
<ul>
<li>求元素的个数
<pre tabindex="0"><code>extern int array[];  // 下面的三个方法都无法处理这种imcomplete type
int a[3];
sizeof(a);  // 12，int占四个字节，这里的a不会退化为指针，C语言的方法，编译期计算
std::size(a);  // 3， 推荐使用该方法，C++方法，编译期计算
std::end(a) - std::begin(a);  // 3，运行期计算
</code></pre></li>
<li>元素遍历
<pre tabindex="0"><code>int a[3];
// 方法1
size_t i = 0;
while (i &lt; std::size(a)) {
  a[i];
  ++i;
}
// 方法2
auto ptr =  std::cbegin(a);
while (ptr != std::cend(a)) {
  ++ptr;
}
// 方法3
for (int x : a) {}
</code></pre></li>
</ul>
</li>
</ul>
<h1 id="c字符串">C字符串</h1>
<ul>
<li>本质上是数组char[]</li>
<li>C语言提供了额外的操作
<pre tabindex="0"><code>#include &lt;cstring&gt;
char str[] = &#34;Hello&#34;;
strlen(str);
// strcmp
</code></pre></li>
</ul>
<h1 id="多维数组">多维数组</h1>
<ul>
<li>类型推导
<pre tabindex="0"><code>#include &lt;type_traits&gt;
int x[3][4];  // x是一个数组，包含了3个 int[4]类型的元素
std::is_same_v(decltype(x[0], int(&amp;)[4]));  // true，x[0]是个表达式，decltype(表达式)会加上引用
auto ptr = x;  // 类型退化只发生在第一维，ptr类型是int(*)[4]，只有这样在执行ptr+1的时候才知道要往后移动多少位

using A = int[4];  // 使用类型别名简化初始化
A x2[3];  // int x2[3][4]
A* ptr = x2;
</code></pre></li>
<li>初始化
<pre tabindex="0"><code>int x[2][3] = {1, 2, 3, 4};  // {123}{400}
int x[2][3] = \{\{1, 2, 3\}, \{4, 5, 6\}\};  // {123}{456}
int x[2][3] = \{\{1, 2, 3\}, \{4, 5\}\};  // // {123}{450}
int x[2][3] = \{\{1, 2\}, \{4, 5\}\};  // // {120}{450}
int x[][3] = {1, 2, 3, 4, 5};  // x的类型是int[2][3]
int x[][] = \{\{1, 2, 3\}, \{4, 5, 6\}\};  // 报错，只有第一个[]里面的size可以自动推导，后面的都得显示标明
</code></pre></li>
<li>遍历
<ul>
<li>二维数组遍历的时候，尽量按行遍历，因为一行的元素往往存在同一块内存，cache命中的概率比较高</li>
</ul>
<pre tabindex="0"><code>int x[2][3] = {1, 2, 3, 4};
for (auto&amp; p : x) {  // 这里的&amp;不能少，如果没有&amp;，p会从int(&amp;)[3]退化为int*，无法进入下面的循环
  for (auto&amp; q : p) {
    // ...
  }
}
</code></pre></li>
</ul>
<h1 id="vector">Vector</h1>
<ul>
<li>是内建数组的代替品</li>
<li>与数组比，更注重易用性
<ul>
<li>可复制</li>
<li>可在运行期改变元素个数</li>
</ul>
</li>
<li>初始化
<pre tabindex="0"><code>std::vector&lt;int&gt; x(3);
std::vector&lt;int&gt; x(3, 1);  // 1, 1, 1
std::vector&lt;int&gt; x{3, 1};  // 3, 1
std::vector&lt;int&gt; x = {1, 2, 3};
</code></pre></li>
<li>索引与遍历
<pre tabindex="0"><code>std::vector&lt;int&gt; x = {1, 2, 3};
std::cout &lt;&lt; x[20] &lt;&lt; std::endl;  // 编译通过，运行可能不会报错
std::cout &lt;&lt; x.at(20) &lt;&lt; std::endl;  // 编译通过，运行报错，所以这种写法更好
</code></pre></li>
<li>迭代器
<ul>
<li>模拟指针的行为</li>
<li>包含多种类别，每种类别支持的操作不同</li>
<li>vector对应随机访问迭代器
<ul>
<li>解引用与下标访问</li>
<li>移动</li>
<li>相减求距离</li>
<li>两个迭代器比较</li>
</ul>
</li>
</ul>
</li>
<li>其他
<ul>
<li>添加元素会导致迭代器失效</li>
</ul>
</li>
</ul>
<h1 id="string">String</h1>
<ul>
<li>是内建字符串的代替品</li>
<li>string其实是std::basic_string&lt;char&gt;的类型别名，basic_string是一个类模板</li>
</ul>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://xwlu.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://xwlu.github.io/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://xwlu.github.io/css/gitalk.css'>
<script src='https://xwlu.github.io/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: '8b0b3f1ab92d6a228c66',
    clientSecret: 'b6ca83c646ca6e48a78c2768b56fcf55470cc0c2',
    repo: 'xwlu.github.io',
    owner: 'xwlu',
    admin: ['xwlu'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://xwlu.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="https://xwlu.github.io/js/github-style.js"></script>







</html>